<!DOCTYPE html>
<html>
<head>
  <meta charset="utf-8">
  <title>JS Bin</title>
  <script src="./node-modules/jquery/dist/jquery.min.js"></script>
</head>
<body>
  <h1></h1>
  <span id='amount'>100</span>
<button id="btn">打钱</button>
  <script>
    btn.addEventListener('click', function(){
      let script= document.createElement('script')
      
      let functionName='frank' + parseInt(Math.random()*100000 , 10)  //函数名
      
      script.src="http://jack.com:8082/pay?callback=" + functionName
      
      document.body.appendChild(script)
      
       window[functionName]= function(result){
         if(result=== 'success'){
            amount.innerText= amount.innerText - 1;
         }else{
           
         }
       }
       script.onload= function(e){
          e.currentTarget.remove()
       }
       script.onerror= function(e){
         alert('fail')
          e.currentTarget.remove()
       }
      
    })
    
  </script>
</body>
</html>